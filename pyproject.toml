[build-system]
requires = ["setuptools>=69", "wheel", "setuptools_scm>=8"]
build-backend = "setuptools.build_meta"

[project]
name = "xbbg"
description = "Intuitive Bloomberg data API"
readme = { file = "README.md", content-type = "text/markdown" }
requires-python = ">=3.10,<3.15"
license = "Apache-2.0"
authors = [
  { name = "Alpha x1", email = "alpha.xone@outlook.com" },
]
classifiers = [
  "Operating System :: OS Independent",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "Programming Language :: Python :: 3.14",
]
dynamic = ["version"]
dependencies = [
  "numpy>=2.2.6",
  "pandas>=2.3.3",
  "pyarrow>=22.0.0",
  "pytest>=8.4.2",
  "pytz>=2025.2",
  "ruamel.yaml>=0.18.16",
]

[project.optional-dependencies]
# Kept for compatibility if consumers expect extras, but dev/test tooling
# is managed via uv dependency groups below.
test = ["pytest", "pytest-cov", "coverage", "codecov"]
dev = ["ruff", "ipykernel", "build", "twine"]
docs = ["sphinx>=5.3.0", "sphinx-rtd-theme>=2.0.0", "sphinx-llms-txt>=0.7.0"]

[project.urls]
Homepage = "https://github.com/alpha-xone/xbbg"
Documentation = "https://xbbg.readthedocs.io/"
Source = "https://github.com/alpha-xone/xbbg"
Issues = "https://github.com/alpha-xone/xbbg/issues"

[tool.setuptools_scm]
# Accept tags like v0.7.10 and translate to 0.7.10
tag_regex = "^(?:v)?(?P<version>\d+\.\d+\.\d+(?:[a-z]\d+)?)$"
fallback_version = "0+unknown"

[tool.setuptools.packages.find]
include = ["xbbg*"]

[tool.setuptools.package-data]
xbbg = ["markets/*.yml"]

[tool.setuptools]
license-files = ["LICENSE"]

[[tool.uv.index]]
name = "bloomberg"
url = "https://blpapi.bloomberg.com/repository/releases/python/simple/"
explicit = true

[tool.uv.sources]
blpapi = { index = "bloomberg" }

[tool.ruff]
target-version = "py310"
line-length = 120
exclude = [
  "xbbg/feeds/*",
  "docs/_build",
  "dist",
  "venv",
  ".venv",
]

[tool.ruff.lint]
select = [
  "E",   # pycodestyle errors
  "W",   # pycodestyle warnings
  "F",   # pyflakes
  "I",   # isort
  "UP",  # pyupgrade
  "B",   # flake8-bugbear
  "C4",  # flake8-comprehensions
  "SIM", # flake8-simplify
  "RET", # flake8-return
  "ISC", # implicit string concatenation
]
ignore = [
  "E701", # multiple statements on one line (colon)
  "E501", # line too long
]

[tool.ruff.lint.per-file-ignores]
"xbbg/__init__.py" = ["F401"]
"xbbg/**/__init__.py" = ["F401"]

[tool.ruff.lint.isort]
known-first-party = ["xbbg"]
combine-as-imports = true
force-sort-within-sections = true

[tool.ruff.lint.mccabe]
max-complexity = 12






[tool.pytest.ini_options]
addopts = "-ra"
filterwarnings = [
  "error::DeprecationWarning",
  "error::PendingDeprecationWarning",
  "error::FutureWarning",
]
